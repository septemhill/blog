{"pageProps":{"postData":{"id":"c-defer-stmt","contentHtml":"<p>前幾天晚上在看 Google 推播的一些文章，裡面包含了一個 llvm-project 的 <a href=\"https://github.com/llvm/llvm-project/pull/162848\" class=\"text-blue-500 hover:underline\" target=\"_blank\" rel=\"noopener noreferrer\">PR</a>。<br>\n我還蠻訝異的，這個在 C 中新增 defer statement 的提案，其實已經很多年了。<br>\n當年從 C 換去寫 Go 之後，一直覺得 defer 這東西真的很好用。<br>\n後來也看到相關的 C 提案，只是一直都沒有實作的消息，一直到現在。<br>\n然後突然想到，既然 llvm 都支援了， gcc 應該也會支援吧。<br>\n於是查了一下，確實也有相關的 <a href=\"https://patchwork.ozlabs.org/project/gcc/list/?series=467675\" class=\"text-blue-500 hover:underline\" target=\"_blank\" rel=\"noopener noreferrer\">patches</a> 正在等待 review。</p>\n<br>\n<p>終於，以前為了解決 memory release 到處 goto 的問題，應該可以稍微減少一點了。<br>\n不過，要等到 kernel / driver 會普遍大量使用，我覺得還有一段路要走吧。<br>\n更何況，也不見得會為了這個 defer statement 回頭去做 refactor。<br>\n畢竟軟體業界最常說的就是：「If it works, don't touch it」。</p>","title":"Defer Statement","date":"2025-10-14","tags":["defer","C","llvm","gcc"],"time":"10:00:00"}},"__N_SSG":true}